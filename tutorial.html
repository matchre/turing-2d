<html>
<head>


<meta charset="utf-8">
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="author" content="Arthur Brongniart">

<script type="text/javascript" src="vendor/html5slider.js"></script>
<script type="text/javascript" src="vendor/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="vendor/jquery.mousewheel.min.js"></script>
<script type="text/javascript" src="vendor/stats.min.js"></script>
<script type="text/javascript" src="vendor/bootstrap/js/bootstrap.js"></script>
<script type="text/javascript" src="js/levels.js"></script>
<script type="text/javascript" src="js/logic.js"></script>

<link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.css" />
<link rel="stylesheet" href="style.css" />


<script type="text/javascript">

window.save=function(){return JSON.stringify(instruction.getDatamap().getRewriteManual());}; //little hack for dev purpose
	
window.onload = function(){
	
	//init some stuffs
	initWhenDOMLoaded();
	
	//models
	var authorizerTape=Authorizer.create(true);
	var authorizerInstruction=Authorizer.create(true);
	
	var engine=TuringEngine.create( SocialMap.create() , SocialMap.create()  );
	
	var ll=LevelsLoader.create(engine,authorizerTape,authorizerInstruction);
	
	var engineplayer = EnginePlayer.create(engine,ll);
	
	
	
	//scene
	var container=$("#container");
	
	scene=Scene.createWithDim(container.width(),container.height(),engine,authorizerTape,authorizerInstruction);
	scene.getElement().appendTo( $("#container") );
	//.css({'position':'absolute' , 'top':'130px' , 'left':'20%' });
	
	//left description panel
	DecriptionPanelView.create( engineplayer , ll , $('#description') , $('#navigation') )
	
	ToolBox.create( scene , engineplayer , ll  ).getElement().appendTo( $("body") ).css({'z-index':50});
	
	//init
	ll.next();
	
	
	//stats by mr doob
	var stats = new Stats();
	stats.setMode(0); // 0: fps, 1: ms

	// Align top-left
	stats.domElement.style.position = 'absolute';
	stats.domElement.style.right = '50px';
	stats.domElement.style.top = '0px';

	document.body.appendChild( stats.domElement );
	
	timeLine.stats=stats;
};


</script>
</head>
<body>
<div style="height:95%;width:33%">
<div id="description" lang="fr" style="overflow-y:auto;height:90%;"></div>
<div id="navigation" lang="fr" style="min-height:30px;height:10%;">
	<div class="btn" data-action="next">next!</div>
	<div class="btn" data-action="solution">solution</div>
	<div class="btn-toolbar">
	  <div class="btn-group">
		
	  </div>
	</div>
</div>
</div>
<div id="container" style=""></div>


<div id="tools-box" class="toolBox">
	<!-- header-->
	<div class="toolBox-header" style="height: 50px;"></div>
	<div>
	<div class="row-fluid tool-group">
			<div class="row-fluid">
			<div class="btn" data-toggle="button" data-action="toggle-pop-up-interaction"></div> pops up instruction
			</div>
			<div class="row-fluid">
			<div class="btn" data-toggle="button" data-action="toggle-follow-cursor"></div> follow cursor
			</div>
		</div>
		  <div class="row-fluid tool-group">
			<div class="row-fluid">
				<div class="btn" data-action="reset-instruction"></div> reset instruction
			</div>
			<div class="row-fluid">
				<div class="btn" data-action="reset-tape"></div> reset tape
			</div>
		  </div>
	</div>
	<ul class="nav nav-tabs" id="myTab">
	  <li><a href="#" data-target="#monitoring">monitoring</a></li>
	  <li><a href="#" data-target="#editing">editing</a></li>
	</ul>
	 
	<div class="tab-content">
	  <div class="tab-pane" id="monitoring">
		  
		  <div id="ctrl-panel" class="row-fluid tool-group">
			  <div class="row-fluid">
				  <div class="btn" data-action="toggle-play"></div>
				  <div class="btn" data-action="play-next"></div>
			  </div>
			  <div class="row-fluid">
				<span data-action="number-cycle" >5</span> cycle per seconde
			  </div>
			  <input data-action="speed-set" type="range" min="0" max="5" style="width:100px;">
			  <div class="row-fluid">
				 <div class="btn" data-action="speed-down"></div>
				 <div class="btn" data-action="speed-up"></div>
			</div>
		  </div>
	  </div>
	  <div class="tab-pane" id="editing">
		 <div class="row-fluid tool-group">
		  <div class="row-fluid">Double click on a cell to edit it</div>
		  </div>
		 <div class="row-fluid tool-group">
			 <div class="btn" data-toggle="button" data-action="toggle-path-tracer"></div>
			 <div class="btn" data-toggle="button" data-action="toggle-eraser"></div>
		</div>
		
	  </div>
	</div>
</div>

<div id="tilePool" style="position:absolute;bottom:10px;display:none;">
<img data-symbol="1" src="ressource/symbols/cel-write.png">
<img data-symbol="2" src="ressource/symbols/cel-check.png">
<img data-symbol="3" src="ressource/symbols/cel-right.png">
<img data-symbol="4" src="ressource/symbols/cel-left.png">
<img data-symbol="5" src="ressource/symbols/cel-top.png">
<img data-symbol="6" src="ressource/symbols/cel-bot.png">
<img data-symbol="7" src="ressource/symbols/cel-dleft.png">
<img data-symbol="8" src="ressource/symbols/cel-dright.png">
<img data-symbol="9" src="ressource/symbols/cel-tright.png">
<img data-symbol="10"src="ressource/symbols/cel-tleft.png">
<img data-symbol="11"src="ressource/symbols/cel-ttop.png">
<img data-symbol="12"src="ressource/symbols/cel-tbot.png">
</div>


<div class="descriptionPool" lang="fr" style="display:none;">
<div class="description" data-id="0">
	<h1>Global view</h1>
	<p>Welcome on this emulator of a 2D Turing machine ! Let us learn together how this works on some concrete examples.</p>
	<h3>Concept</h3>
	<p>You may not be familiar with the Turing Machine concept.
	<div class="accordion-group mine">
	    <div class="accordion-heading">
	      <a class="accordion-toggle" data-toggle="collapse" href="#collapse1">
	        Explanations
	      </a>
	    </div>
	    <div id="collapse1" class="accordion-body collapse">
			<div class="accordion-inner mine">
				<p>A reminder is therefore required. The machine has a tape composed of data cells on which a symbol is written. It also has an instruction set which describes a program. At each iteration, the machine performs actions. These are typically: change the status of the machine, move the date tape cursor, write data onto the tape. The next action is chosen according to the instruction set, the current machine state, or the symbol read on the date tape. From this simple mechanism the operations of a complex computer can be reproduced. In fact, all algorithms can be implemented. </p>
				<p>Here we use a special machine, with a two dimensional tape. The cursor can move horizontally and vertically. Let us the term map to name such a band. A second map is used to encode the instruction set. It is also covered by a cursor. The cursor position determines the state of the machine. The program card and the data use the same set of symbol.</p>
				<p> This symbol set if relatively simple. It comprises arrows coding the cursor displacement on the data map ( <span class='symbol-tleft mini-tile'></span> <span class='symbol-tright mini-tile'></span> <span class='symbol-ttop mini-tile'></span> <span class='symbol-tbot mini-tile'></span> ), arrows coding the displacement on the instruction map ( <span class='symbol-left mini-tile'></span> <span class='symbol-right mini-tile'></span> <span class='symbol-top mini-tile'></span> <span class='symbol-bot mini-tile'></span> <span class='symbol-dright mini-tile'></span> <span class='symbol-dleft mini-tile'></span> ), while the default behavior is from left to write after reading a symbol, and finally color symbols, without any meaning as instruction beyond a default displacement ( <span class='symbol-color1 mini-tile'></span> <span class='symbol-color2 mini-tile'></span> <span class='symbol-color3 mini-tile'></span> ... ). Let us add two more complex symbols, y order to have a full functionality. The circle, ( <span class='symbol-check mini-tile'></span> ) is the ``conditional symbol´´ as a function of the symbol that follows. When the machine encounters this symbol, the next symbol is read, and if the symbol on the data map is the same as this next symbol, the next instruction symbol is the one on the left, otherwise it is the one below. Finnaly the cross ( <span class='symbol-write mini-tile'></span> ) allows to write on the data map a symbol, the symbol lefwards to the cross.</p>
			</div>
		</div>
	</div>
	<h3>Usage</h3>
	<p>Let us now get familiar with the interface. You can see on your left the two maps, the program map upward and the data map downward. You can navigate in these maps via the control click and drag, and adjust the zoom with the mouse wheel.</p>
	<p>Let us now manipulate the panel monitor, located rightward in the toolbox, by selecting the monitor tab. You can start the machine, stop it, or choose the step-by-step mode.</p>
	<p>To realize this tutorial, start the machine and observer the cursor displacement as a function of the written symbol.</p>
	<h3>Summary</h3>
	<div class="recap">
          <p>The goal here is to get familiar with the interface.</p>
	<ul>
	<li>Move the <strong>maps</strong> using <strong>click and grad</strong> mouse interaction</li>
	<li>Zoom using the <strong>mouse wheel</strong></li>
	<li>Get in <strong>monitoring</strong> mode clicking on the tab</li>
	<li>Run the machine with the <strong>play</strong> button</li>
	<li>Enjoy the result</li>
	</ul>
	</div>
</div>

<div class="description" data-id="1">
	<h1>Edition</h1>
	<p>Your turn now ! The program is intentionnaly wrong. The dream is to observe the cursor wandering aong the square as previously.</p>
	<p>Le us see how to use the editor. First go into edit mode by clicking on the tab of the toolbox. The weird face buttons are going to be explained latter. First notice that your freedom of action is restricted for this tutorial : you can only edit unshaded cells. Double-click one of them to change its symbol. A panel should allow you to select the desired symbol in a list.</p>
	<div class="accordion-group mine">
	    <div class="accordion-heading">
	      <a class="accordion-toggle" data-toggle="collapse" href="#collapse2">
	        Show me!
	      </a>
	    </div>
	    <div id="collapse2" class="accordion-body collapse">
			<div class="accordion-inner mine">
				<img width="475" height="347" src="ressource/hint/edit.png"></img>
			</div>
		</div>
	</div>
	<p>Notice that each symbol is associated to a keyboard key, so that we can very easily write a symbole sequence with the keyboard. Validate the input with the Enter key, in order to get to the next one.</p>
	<p>When the progreem is completed, test it with the monitoring mode.</p>
	<h3>Summary</h3>
	<div class="recap">
	<p>The goal here is to get familiar with the interface.</p>
	<ul>
	<li>Use the toolbox in <strong>editing</strong> mode, cliking on the tab</li>
	<li>You can now edit the cell by  <strong>double-clicking</strong>. <small>( here only on an editable cell )</small></li>
	<li>Complete the path</li>
	<li>Switch to the <strong>monitoring</strong> mode</li>
	<li>Run the machine</li>
	</ul>
	</div>
</div>


<div class="description" data-id="2">
	<h1>Advanced functionnalities</h1>
	<p>The goal is now to complete our tour. Let us now used the advaanced tools.</p>
	<p>-1- A quick way to trace a path is to use the drawing tool path. You will find it in the toolbox in the editing tab. When the "route tracer tool" button is selected, make a click and drag from one point to another to connect them by a path.</p>
	<div class="accordion-group mine">
	    <div class="accordion-heading">
	      <a class="accordion-toggle" data-toggle="collapse" href="#collapse31">
	        Show me!
	      </a>
	    </div>
	    <div id="collapse31" class="accordion-body collapse">
			<div class="accordion-inner mine">
				<img width="475" height="347" src="ressource/hint/route-tracer.png"></img>
			</div>
		</div>
	</div>
	<p>-2- You will probably need to clean some area of all the symbols (e.g., paths can be traced only on empty boxes). For this, use the eraser area, also in the editing tab. Select an area by clicking and dragging release to erase symbols of area. You just have to draw a path avoiding non-editable cells.</p>
	<div class="accordion-group mine">
	    <div class="accordion-heading">
	      <a class="accordion-toggle" data-toggle="collapse" href="#collapse32">
	        Show me!
	      </a>
	    </div>
	    <div id="collapse32" class="accordion-body collapse">
			<div class="accordion-inner mine">
				<img width="475" height="347" src="ressource/hint/eraser.png"></img>
			</div>
		</div>
	</div>
	<p>-3- Sometimes you need to jump over a cell (for example, if you want to keep the form of 8). You can do this using the double displacement symbol ( <span class='mini-tile symbol-dleft'></span> <span class='mini-tile symbol-dright'></span> ). This is very useful for paths to be able to cross. Note that the tracer path is able to use this symbol, if needed.</p> 

	<h3>Summary</h3>
	<div class="recap">
	<p>The goal here is to get familiar with the advanced tools.</p>
	<ul>
	<li>Put the toolbox in <strong>editing</strong> mode</li>
	<li>Use the root tracer tool by <strong>cliking draging</strong>, along the desired path</li>
	<li>Use the eraser by  <strong>cliking draging</strong>, to delineate the area.</li>
        <li>Une the double move symbol symbol to jump over a cell</li>
	<li>Run the machine in monitoring mode as usual</li>
	</ul>
	</div>
</div>


<div class="description" data-id="3">
	<h1>Drawing</h1>
	<p>Let us now the instructions to modify the data map.</p>
	<p>The purpose of this exercise is to draw a square around the purple orange cell on the data card. You have access to it only though the instructions given to the machine.</p>
	<div style='margin-left:10%'>
	<div><span class='mini-tile symbol-color2'></span><span class='mini-tile symbol-color2'></span><span class='mini-tile symbol-color2'></span></div>
	<div><span class='mini-tile symbol-color2'></span><span class='mini-tile symbol-color6'></span><span class='mini-tile symbol-color2'></span></div>
	<div><span class='mini-tile symbol-color2'></span><span class='mini-tile symbol-color2'></span><span class='mini-tile symbol-color2'></span></div>
	</div>
	<p>This pattern is the expected goal of this activity.</p>
	<p>The instructions <span class='mini-tile symbol-tleft'></span>, <span class='mini-tile symbol-tright'></span>, <span class='mini-tile symbol-ttop'></span> and <span class='mini-tile symbol-tbot'></span> are going to be useful to move the cursor on the data map.</p>
	<p>When on the right cell, use the following symbols combination <span class='mini-tile symbol-write'></span> <span class='mini-tile symbol-color2'></span> in order to write the magenta symbol.</p>
	<p>Repeat the operation for each cell of the square.</p>
	<p>For this exercise, note that you can change the initial position of the cursor.</p>	
</div>


<div class="description" data-id="4">
	<h1>Follow your way</h1>
	<p>Let us now play around with the conditional statement. The goal is to rewrite the blue way to make it green. To do this we will have to follow the path.</p>
	<p>The proposed approach is the following: Assume that you are on a green box, we will move on the cells boxes around us to test where is the continuation of the path. To do this we use the conditional statement <span class='mini-tile symbol-check'></span> <span class='mini-tile symbol-color5'></span>, if data maap cell is <span class='mini-tile symbol-color5'></span> then the cursor moves to the right instruction, otherwise it moves downward.</p>
	<p>When detected a blue cekk, we repaint it ( <span class='mini-tile symbol-write'></span> <span class='mini-tile symbol-color4'></span> ). Then we loop on the initial state to resume the series of instruction from the new cell.</p>
</div>

<div class="description" data-id="5">
	<h1>Mathematics</h1>
	<p>Let us now wee how we can realize basic arithmetic operations. Here we consider adding two integers.</p>
	<h3>Representation</h3>
	<p>An integer X is represented by X green consecutive cells. A blue cell is drawn on the left as a token.</p>
	<div style='margin-left:10%'>
	<p><small>For instance the number 4 writes: </small></p>
	<div><span class='mini-tile symbol-color4'></span> <span class='mini-tile symbol-color5'></span> <span class='mini-tile symbol-color5'></span> <span class='mini-tile symbol-color5'></span> <span class='mini-tile symbol-color5'></span></div>
	<p></p>
	</div>
	<p>The two integers are set in row : </p>
	<div style='margin-left:10%'>
	<div><span class='mini-tile symbol-color4'></span> <span class='mini-tile symbol-color5'></span> <span class='mini-tile symbol-color5'></span> <span class='mini-tile symbol-color5'></span> <span class='mini-tile symbol-color5'></span></div>
	<div><span class='mini-tile symbol-color4'></span> <span class='mini-tile symbol-color5'></span> <span class='mini-tile symbol-color5'></span> </div>
	</div>
	
	<p><small>The goal is to obtain, at the end of the run, the 1st integer equal to the sum of both</small></p>
	<div style='margin-left:10%'>
	<p>4+2=6 </p>
	<div><span class='mini-tile symbol-color4'></span> <span class='mini-tile symbol-color5'></span> <span class='mini-tile symbol-color5'></span> <span class='mini-tile symbol-color5'></span> <span class='mini-tile symbol-color5'></span> <span class='mini-tile symbol-color5'></span> <span class='mini-tile symbol-color5'></span></div>
	<div><span class='mini-tile symbol-color4'></span> </div>
	</div>
	
	<h3>Procedure</h3>
	<p>We propose the following approach: a decrement of the second number step by step, while incrementing the upper one, while the bottom number is nonzero.</p>
	
	
</div>

</div>


</body>
</html>
