<html>
<head>


<meta charset="utf-8">
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="author" content="Arthur Brongniart">

<script type="text/javascript" src="external/html5slider.js"></script>
<script type="text/javascript" src="external/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="external/jquery.mousewheel.min.js"></script>
<script type="text/javascript" src="external/stats.min.js"></script>
<script type="text/javascript" src="external/bootstrap/js/bootstrap.js"></script>
<script type="text/javascript" src="levels.js"></script>
<script type="text/javascript" src="logic.js"></script>

<link rel="stylesheet" href="external/bootstrap/css/bootstrap.css" />
<link rel="stylesheet" href="style.css" />


<script type="text/javascript">

window.save=function(){return JSON.stringify(instruction.getDatamap().getRewriteManual());}; //little hack for dev purpose
	
window.onload = function(){
	
	//init some stuffs
	initWhenDOMLoaded();
	
	//models
	var authorizerTape=Authorizer.create(true);
	var authorizerInstruction=Authorizer.create(true);
	
	var engine=TuringEngine.create( SocialMap.create() , SocialMap.create()  );
	
	var ll=LevelsLoader.create(engine,authorizerTape,authorizerInstruction);
	
	var engineplayer = EnginePlayer.create(engine,ll);
	
	
	
	//scene
	var container=$("#container");
	
	scene=Scene.createWithDim(container.width(),container.height(),engine,authorizerTape,authorizerInstruction);
	scene.getElement().appendTo( $("#container") );
	//.css({'position':'absolute' , 'top':'130px' , 'left':'20%' });
	
	//left description panel
	DecriptionPanelView.create( engineplayer , ll , $('#description') , $('#navigation') )
	
	ToolBox.create( scene , engineplayer , ll  ).getElement().appendTo( $("body") ).css({'z-index':50});
	
	//init
	ll.next();
	
	
	//stats by mr doob
	var stats = new Stats();
	stats.setMode(0); // 0: fps, 1: ms

	// Align top-left
	stats.domElement.style.position = 'absolute';
	stats.domElement.style.right = '50px';
	stats.domElement.style.top = '0px';

	document.body.appendChild( stats.domElement );
	
	timeLine.stats=stats;
};


</script>
</head>
<body>
<div style="height:95%;width:33%">
<div id="description" lang="fr" style="overflow-y:auto;height:90%;"></div>
<div id="navigation" lang="fr" style="min-height:30px;height:10%;">
	<div class="btn" data-action="next">next!</div>
	<div class="btn" data-action="solution">solution</div>
	<div class="btn-toolbar">
	  <div class="btn-group">
		
	  </div>
	</div>
</div>
</div>
<div id="container" style=""></div>


<div id="tools-box" class="toolBox">
	<!-- header-->
	<div class="toolBox-header" style="height: 50px;"></div>
	<div>
	<div class="row-fluid tool-group">
			<div class="row-fluid">
			<div class="btn" data-toggle="button" data-action="toggle-pop-up-interaction"></div> pops up instruction
			</div>
			<div class="row-fluid">
			<div class="btn" data-toggle="button" data-action="toggle-follow-cursor"></div> follow cursor
			</div>
		</div>
		  <div class="row-fluid tool-group">
			<div class="row-fluid">
				<div class="btn" data-action="reset-instruction"></div> reset instruction
			</div>
			<div class="row-fluid">
				<div class="btn" data-action="reset-tape"></div> reset tape
			</div>
		  </div>
	</div>
	<ul class="nav nav-tabs" id="myTab">
	  <li><a href="#" data-target="#monitoring">monitoring</a></li>
	  <li><a href="#" data-target="#editing">editing</a></li>
	</ul>
	 
	<div class="tab-content">
	  <div class="tab-pane" id="monitoring">
		  
		  <div id="ctrl-panel" class="row-fluid tool-group">
			  <div class="row-fluid">
				  <div class="btn" data-action="toggle-play"></div>
				  <div class="btn" data-action="play-next"></div>
			  </div>
			  <div class="row-fluid">
				<span data-action="number-cycle" >5</span> cycle per seconde
			  </div>
			  <input data-action="speed-set" type="range" min="0" max="5" style="width:100px;">
			  <div class="row-fluid">
				 <div class="btn" data-action="speed-down"></div>
				 <div class="btn" data-action="speed-up"></div>
			</div>
		  </div>
	  </div>
	  <div class="tab-pane" id="editing">
		 <div class="row-fluid tool-group">
		  <div class="row-fluid">Double click on a cell to edit it</div>
		  </div>
		 <div class="row-fluid tool-group">
			 <div class="btn" data-toggle="button" data-action="toggle-path-tracer"></div>
			 <div class="btn" data-toggle="button" data-action="toggle-eraser"></div>
		</div>
		
	  </div>
	</div>
</div>

<div id="tilePool" style="position:absolute;bottom:10px;display:none;">
<img data-symbol="1" src="ressource/symbols/cel-write.png">
<img data-symbol="2" src="ressource/symbols/cel-check.png">
<img data-symbol="3" src="ressource/symbols/cel-right.png">
<img data-symbol="4" src="ressource/symbols/cel-left.png">
<img data-symbol="5" src="ressource/symbols/cel-top.png">
<img data-symbol="6" src="ressource/symbols/cel-bot.png">
<img data-symbol="7" src="ressource/symbols/cel-dleft.png">
<img data-symbol="8" src="ressource/symbols/cel-dright.png">
<img data-symbol="9" src="ressource/symbols/cel-tright.png">
<img data-symbol="10"src="ressource/symbols/cel-tleft.png">
<img data-symbol="11"src="ressource/symbols/cel-ttop.png">
<img data-symbol="12"src="ressource/symbols/cel-tbot.png">
</div>


<div class="descriptionPool" lang="fr" style="display:none;">
<div class="description" data-id="0">
	<h1>Vue d'ensemble</h1>
	<p>Bienvenue sur cet émulateur de machine de Turing en 2 dimension! Nous allons voir ensemble comment il fonctionne à travers une série de cas.</p>
	<h3>Concept</h3>
	<p>Vous n'êtes peut être pas familier du prinicpe de machine de Turing.
	<div class="accordion-group mine">
	    <div class="accordion-heading">
	      <a class="accordion-toggle" data-toggle="collapse" href="#collapse1">
	        Explications
	      </a>
	    </div>
	    <div id="collapse1" class="accordion-body collapse">
			<div class="accordion-inner mine">
				<p>Un petit rappel s'impose donc. La machine dispose d'une bande de donnée composée de cellules où sont inscrits des symboles. Ainsi que d'un jeu d'instruction qui forme un programme. A chaque itération la machine effectue des actions. Ces dernières sont typiquement : changer l'état de la machine, déplacer le curseur de lecture de la bande de donnée, écrire sur la bande de donnée. Elle décide de quoi faire d'après son jeu d'instruction, cela peut varier selon l'état dans lequel elle se trouve, ou selon le symbole lut sur la bande de donnée. A partir ce mécanisme simple on peut reproduire le fonctionnement d'un ordinateur complexe.</p>
				<p> Voilà pour le principe général, ici nous utiliserons une machine particulière. Nous utiliserons une bande de donnée à deux dimensions, c'est à dire que le curseur peut se déplacer horizontalement et verticalement. Il conviendra de parler de carte pour désigner une telle bande. Nous utiliserons une seconde carte pour coder le jeu d'instruction, elle est elle aussi parcourue par un curseur. La position du curseur déterminera ainsi l'état de la machine. La carte programme et la carte de donnée utilisent le même jeu de symbole.</p>
				<p> Ce dernier est assez simple, il se compose de flèches codant pour le déplacement du curseur de la carte de donnée ( <span class='symbol-tleft mini-tile'></span> <span class='symbol-tright mini-tile'></span> <span class='symbol-ttop mini-tile'></span> <span class='symbol-tbot mini-tile'></span> ), de flèches codant pour le déplacement du curseur de la carte d'instruction ( <span class='symbol-left mini-tile'></span> <span class='symbol-right mini-tile'></span> <span class='symbol-top mini-tile'></span> <span class='symbol-bot mini-tile'></span> <span class='symbol-dright mini-tile'></span> <span class='symbol-dleft mini-tile'></span> ), par défaut ce dernier se déplace de gauche à droite apès la lecture d'un symbole , et de symbole de couleur, n'ayant pas d'autre signification pour le programme qu'un déplacement par par défaut ( <span class='symbol-color1 mini-tile'></span> <span class='symbol-color2 mini-tile'></span> <span class='symbol-color3 mini-tile'></span> ... ). Ajoutons deux symboles plus complexes pour avoir une machine fonctionnelle. Un rond, ( <span class='symbol-check mini-tile'></span> ) le symbole conditionnel sa signification est liée au symbole qui le suit. Lorsque la machine arrive sur ce symbole, elle lit le symbole sur la carte de donnée, si c'est le même que le symbole suivant sur la carte programme, la machine passe sur le symbole gauche suivant, sinon elle passe sur le symbole en bas. Enfin la croix ( <span class='symbol-write mini-tile'></span> ) permet d'inscrire sur la carte de donnée un symbole.</p>
			</div>
		</div>
	</div>
	<h3>Usage</h3>
	<p>Bien! Maintenant que l'on a les bases, penchons nous sur l'interface. Vous pouvez observer sur votre gauche les deux carte, la carte programme en haut et la carte donnée en bas. Vous pouvez naviguer dans ces carte via cliquer-glisser et ajuster le niveau de zoom avec la molette de la souris.</p>
	<p>Manipulons à présent le panneau de monitoring, il se trouve tout à droite dans la boite à outils, selectionnez l'onglet monitoring. Vous pouvez y lancer la machine, la stopper, ou choisir l'execution pas à pas.</p>
	<p>Pour réussir cet exercice, lancez la machine et observez le curseur programme se déplacer en fonction du symbole inscrit sur sa case.</p>
	<h3>Récapitulatif</h3>
	<div class="recap">
	<p>Cet exercice à pour but de vous familiariser avec l'interface.
	<ul>
	<li>Déplacez les <strong>cartes</strong> en utilisant le <strong>cliquer-glisser</strong></li>
	<li>Zoomez celle-ci en utilisant la <strong>molette souris</strong></li>
	<li>Passez la boite à outils en mode <strong>monitoring</strong> (cliquez sur l'onglet)</li>
	<li>Lancer la machine grâce au bouton <strong>play</strong></li>
	<li>Contemplez le résultat</li>
	</ul>
	</div>
</div>


<div class="description" data-id="1">
	<h1>Editons</h1>
	<p>A vous maintenant! La carte programme de cet exercise est défectueuse, on voudrait que le curseur effectue des tours, comme précédement.</p>
	<p>Voyons comment utiliser l'éditeur. Premièrement passez en mode édition en cliquant sur l'onglet de la boite à outils. Nous reviendrons plus tard sur les boutons avec une tête bizarre. Sachez tout d'abord que votre liberté d'action est restreinte pour cette exercice et que vous ne pouvez éditer que les cellules non grisées. Double cliquez sur l'une d'elle pour modifier son symbole. Un panneau devrait vous permettre de selectionner le symbole souhaité dans une liste.</p>
	<div class="accordion-group mine">
	    <div class="accordion-heading">
	      <a class="accordion-toggle" data-toggle="collapse" href="#collapse2">
	        Montre moi!
	      </a>
	    </div>
	    <div id="collapse2" class="accordion-body collapse">
			<div class="accordion-inner mine">
				<img width="475" height="347" src="ressource/hint/edit.png"></img>
			</div>
		</div>
	</div>
	<p>Remarquez que tout symbole est lié à une touche et que vous pouvez rapidement écrire une ligne de symboles en vous servant de votre clavier. Validez la saisie au clavier avec la touche entré pour passer à la cellule suivante.</p>
	<p>Lorsque vous avez complété le programme, testez le en mode monitoring.</p>
	<h3>Récapitulatif</h3>
	<div class="recap">
	<p>On vous demande de vous servir des outils d'édition.</p>
	<ul>
	<li>Passez la boite à outils en mode <strong>editing</strong> (cliquez sur l'onglet)</li>
	<li>Vous pouvez à présent éditer les cases en <strong>double-cliquant</strong>. <small>( Sur une cellule blanche éditable )</small></li>
	<li>Complétez le chemin</li>
	<li>Repassez en <strong>monitoring</strong></li>
	<li>Lancez la machine</li>
	</ul>
	</div>
</div>


<div class="description" data-id="2">
	<h1>Fonctionnalités avancées</h1>
	<p>Même chose ici, le but est de compléter la boucle. Vous êtes cette fois invité à utiliser les outils avancés.</p>
	<p>Prennez la première coupure, une manière rapide de tracer un chemin est d'utiliser l'outil de traçage de chemin . Vous le trouverez dans la boite à outils, dans l'onglet d'édition. Lorsque celui est sélectionné, faites un cliquer-glisser depuis un point vers un autre pour les relier par un chemin.</p>
	<div class="accordion-group mine">
	    <div class="accordion-heading">
	      <a class="accordion-toggle" data-toggle="collapse" href="#collapse31">
	        Montre moi!
	      </a>
	    </div>
	    <div id="collapse31" class="accordion-body collapse">
			<div class="accordion-inner mine">
				<img width="475" height="347" src="ressource/hint/route-tracer.png"></img>
			</div>
		</div>
	</div>
	<p>De même pour la seconde coupure, cependant avant d'utiliser l'outil vous aurez probablement besoin de nettoyer la zone de tout les symboles ( les chemins ne peuvent être tracés que sur des cases vides ). Pour cela utilisez l'effaceur de zone, lui aussi dans l'onglet édition. Selectionner une zone par cliquer glisser et relâchez pour effacer les symboles de la zone. Il ne vous reste qu'à tracer un chemin en évitant les cellules non modifiable.</p>
	<div class="accordion-group mine">
	    <div class="accordion-heading">
	      <a class="accordion-toggle" data-toggle="collapse" href="#collapse32">
	        Montre moi!
	      </a>
	    </div>
	    <div id="collapse32" class="accordion-body collapse">
			<div class="accordion-inner mine">
				<img width="475" height="347" src="ressource/hint/eraser.png"></img>
			</div>
		</div>
	</div>
	<p>Enfin pour la troisième coupure, vous aurez besoin de sauter par dessus une cellule ( on veut garder la forme de 8 ). Vous pouvez pour cela utiliser le symbole double déplacement ( <span class='mini-tile symbol-dleft'></span> <span class='mini-tile symbol-dright'></span> ). C'est très utile pour que des chemins puissent se croiser. Remarquez que le traceur de chemin est capable d'utiliser ce symbole si il le faut.</p> 
	<h3>Récapitulatif</h3>
	<div class="recap">
	<p>Passons en revue les outils avancés</p>
	<ul>
	<li>Passez la boite à outils en mode <strong>editing</strong></li>
	<li>Utilisez le traceur de chemin en <strong>cliquant glissant</strong> le long du chemin désiré.</li>
	<li>Utilisez l'effaceur de zone en <strong>cliquant glissant</strong> pour délimiter la zone.</li>
	<li>Utilisez le symbole <strong>double déplacement</strong> pour sauter une case</li>
	<li>Lancez la machine depuis le mode <strong>monitoring</strong></li>
	</ul>
	</div>
</div>


<div class="description" data-id="3">
	<h1>Dessinons</h1>
	<p>Vous en savez assez sur l'utilisation de l'interface. C'est maintenant le moment d'utiliser les instructions pour agir sur la bande de donnée.</p>
	<p>Le but de cet exercice est de dessiner un carré violet autour de la cellule orange sur la carte de donnée. Vous n'avez accès à celle-ci que via les instructions donnée à la machine.</p>
	<div style='margin-left:10%'>
	<div><span class='mini-tile symbol-color2'></span><span class='mini-tile symbol-color2'></span><span class='mini-tile symbol-color2'></span></div>
	<div><span class='mini-tile symbol-color2'></span><span class='mini-tile symbol-color6'></span><span class='mini-tile symbol-color2'></span></div>
	<div><span class='mini-tile symbol-color2'></span><span class='mini-tile symbol-color2'></span><span class='mini-tile symbol-color2'></span></div>
	</div>
	<p>C'est à ce motif que l'on voudrait arriver.</p>
	<p>Les instructions <span class='mini-tile symbol-tleft'></span>, <span class='mini-tile symbol-tright'></span>, <span class='mini-tile symbol-ttop'></span> et <span class='mini-tile symbol-tbot'></span> seront utile pour déplacer le cureur de la carte de donnée.</p>
	<p>Une fois sur la bonne cellule, utilisez la compinaison de symbole <span class='mini-tile symbol-write'></span> <span class='mini-tile symbol-color2'></span> pour inscrire le symbole violet.</p>
	<p>Répéter l'opération pour toutes les cellules du carré.</p>
	<p>Pour cet exercie vous pouvez modifiez la position initial du curseur.</p>	
</div>


<div class="description" data-id="4">
	<h1>Suivre sa voie</h1>
	<p>Jouons un peu avec l'instruction conditionnelle. Le but est de réécrire sur le chemin bleu pour le rendre vert. Pour ce faire il va falloir suivre le chemin.</p>
	<p>L'approche proposée est la suivante, supposons que l'on se trouve sur une case verte, on va se déplacer sur les cases qui nous entoure pour tester laquelle est le prolongement du chemin. Pour ce faire on utilisera l'instruction conditionnelle <span class='mini-tile symbol-check'></span> <span class='mini-tile symbol-color5'></span>, si la case de la carte de donnée est <span class='mini-tile symbol-color5'></span> alors le curseur instruction se déplace à droite, sinon il se déplace vers le bas.</p>
	<p>Lorsque l'on detecte une case bleu, on la repeint ( <span class='mini-tile symbol-write'></span> <span class='mini-tile symbol-color4'></span> ). On boucle ensuite sur l'état initial pour reprendre la série d'instruction depuis la nouvelle case</p>
	
</div>

<div class="description" data-id="5">
	<h1>Mathématiques</h1>
	<p>Vous allez voir qu'il est possible de réalisez des opérations arithmétiques simples. Ici nous ferons l'addition de deux entiers.</p>
	<h3>Représentation</h3>
	<p>Un entier est X est représenté par X cellules vertes consécutives. On placera une cellule bleu tout à gauche afin de nous servir de repère.</p>
	<div style='margin-left:10%'>
	<p><small>par exemple le nombre 4: </small></p>
	<div><span class='mini-tile symbol-color4'></span> <span class='mini-tile symbol-color5'></span> <span class='mini-tile symbol-color5'></span> <span class='mini-tile symbol-color5'></span> <span class='mini-tile symbol-color5'></span></div>
	<p></p>
	</div>
	<p>On place les deux entiers en colonne : </p>
	<div style='margin-left:10%'>
	<div><span class='mini-tile symbol-color4'></span> <span class='mini-tile symbol-color5'></span> <span class='mini-tile symbol-color5'></span> <span class='mini-tile symbol-color5'></span> <span class='mini-tile symbol-color5'></span></div>
	<div><span class='mini-tile symbol-color4'></span> <span class='mini-tile symbol-color5'></span> <span class='mini-tile symbol-color5'></span> </div>
	</div>
	
	<p><small>On souhaite qu'à la fin de l'exécution, le premier soit la somme des deux</small></p>
	<div style='margin-left:10%'>
	<p>4+2=6 </p>
	<div><span class='mini-tile symbol-color4'></span> <span class='mini-tile symbol-color5'></span> <span class='mini-tile symbol-color5'></span> <span class='mini-tile symbol-color5'></span> <span class='mini-tile symbol-color5'></span> <span class='mini-tile symbol-color5'></span> <span class='mini-tile symbol-color5'></span></div>
	<div><span class='mini-tile symbol-color4'></span> </div>
	</div>
	
	<h3>Procédure</h3>
	<p>On propose l'approche suivante : décrémenter de un le nombre de pas tout en incrémentant de un celui du haut, tant que le nombre du bas est différent de zéro.</p>
	
	
</div>

</div>


</body>
</html>